---
title: "ASR (Websocket)"
description: "Complete parameter and response reference for the ASR WebSocket API"
asyncapi: "/asyncapi-spec/asr-ws.json /api/v1/asr"
---

# ASR WebSocket API Reference

Complete reference documentation for the Waves ASR WebSocket API parameters, responses, and error codes.

## Endpoint

**Production URL**: `wss://waves-api.smallest.ai/api/v1/asr`

## Connection Parameters

All parameters are passed as query strings in the WebSocket URL. Parameters are **case-sensitive** and unknown or invalid parameters will result in an error response and connection closure.

### Core Parameters

<ParamField query="audioLanguage" type="enum" default="en" required>
  Language of the audio input
  
  **Currently Supported Languages:**
  
  **IN Region:**
  - `en` - English
  - `hi` - Hindi
  
  **US Region:**
  - `en` - English
  - `hi` - Hindi
  - `es` - Spanish
  - `fr` - French
  - `de` - German
  - `ru` - Russian
  - `pt` - Portuguese
  - `ja` - Japanese
  - `it` - Italian
  - `nl` - Dutch
  
  **Available on Request (Both Regions):**
  - `zh` - Chinese Mandarin
  - `zh-hk` - Chinese Cantonese
  - `tr` - Turkish
  - `vi` - Vietnamese
  - `th` - Thai
  - `id` - Indonesian
  - `uk` - Ukrainian
  - `ta` - Tamil
  - `mr` - Marathi
  - `te` - Telugu
  - `pl` - Polish
  - `el` - Greek
  - `hu` - Hungarian
  - `ro` - Romanian
  - `cs` - Czech
  - `sv` - Swedish
  - `bg` - Bulgarian
  - `da` - Danish
  - `fi` - Finnish
  
</ParamField>

<ParamField query="audioEncoding" type="enum" default="linear16" required>
  Audio encoding format
  
  **Valid Values:**
  - `linear16` - 16-bit linear PCM
  - `flac` - FLAC compressed
  - `mulaw` - μ-law encoded  
  - `opus` - Opus compressed
</ParamField>

<ParamField query="audioSampleRate" type="number" default="16000" required>
  Sample rate in Hz
  
  **Range:** 8000-48000 (integer)
  **Recommended:** 16000 for optimal performance
</ParamField>

<ParamField query="audioChannels" type="number" default="1" required>
  Number of audio channels
  
  **Range:** 1+ (integer)
  **Recommended:** 1 (mono) for efficiency
</ParamField>

### Optional Parameters

<ParamField query="addPunctuation" type="boolean" optional>
  Add punctuation to transcripts
  
  **Values:** `true`, `false`
</ParamField>

<ParamField query="speechEndThreshold" type="number" optional>
  Duration in milliseconds to determine end of speech
  
  **Range:** 10-60000 (integer)
  **Default:** 300ms
</ParamField>

<ParamField query="emitVoiceActivity" type="boolean" optional>
  Emit voice activity detection events
  
  **Values:** `true`, `false`
</ParamField>

<ParamField query="redactSensitiveData" type="array" optional>
  Redact sensitive data types
  
  **Values:** Comma-separated array
  - `"pci"` - Payment card information
  - `"ssn"` - Social security numbers
  - `"numbers"` - Generic number redaction
  
</ParamField>

<ParamField query="speechEndpointing" type="string|number" optional>
  Speech endpointing behavior
  
  **Values:**
  - `"true"` - Enable automatic endpointing
  - `"false"` - Disable endpointing
  - `10-60000` - Custom threshold in milliseconds
</ParamField>

## URL Construction Examples

### Basic Connection
```
wss://waves-api.smallest.ai/api/v1/asr?api_key=YOUR_API_KEY&audioEncoding=linear16&audioSampleRate=16000&audioChannels=1
```

### Advanced Configuration
```
wss://waves-api.smallest.ai/api/v1/asr?api_key=YOUR_API_KEY&audioLanguage=en&audioEncoding=linear16&audioSampleRate=16000&audioChannels=1&addPunctuation=true&speechEndThreshold=500&redactSensitiveData=pci,ssn
```

## Audio Data Format

### Sending Audio

Send audio data as **binary messages** that match your specified encoding, sample rate, and channels.

#### Format Specifications

<Tabs>
  <Tab title="linear16">
    **16-bit Linear PCM**
    - Bit depth: 16-bit signed integers
    - Byte order: Little-endian
    - Sample rate: Match `audioSampleRate` parameter
    - Channels: Match `audioChannels` parameter
    - Recommended chunk size: 32,000 bytes (1 second at 16kHz mono)
  </Tab>
  
  <Tab title="flac">
    **FLAC Compressed**
    - Standard FLAC encoding
    - Sample rate: Match `audioSampleRate` parameter
    - Channels: Match `audioChannels` parameter
    - Chunk size: Variable based on compression
  </Tab>
  
  <Tab title="mulaw">
    **μ-law Encoded**
    - 8-bit μ-law encoding
    - Typically used for telephony (8kHz)
    - Sample rate: Match `audioSampleRate` parameter
    - Channels: Match `audioChannels` parameter
  </Tab>
  
  <Tab title="opus">
    **Opus Compressed**
    - Standard Opus encoding
    - Supports browser-native formats (WebM/Opus)
    - Sample rate: Match `audioSampleRate` parameter
    - Channels: Match `audioChannels` parameter
  </Tab>
</Tabs>

### Recommended Chunk Sizes

For optimal real-time performance:

| Sample Rate | Bit Depth | Channels | Duration | Chunk Size |
|-------------|-----------|----------|----------|------------|
| 16kHz | 16-bit | 1 (mono) | 1 second | 32,000 bytes |
| 16kHz | 16-bit | 1 (mono) | 2 seconds | 64,000 bytes |
| 8kHz | 16-bit | 1 (mono) | 1 second | 16,000 bytes |
| 44.1kHz | 16-bit | 1 (mono) | 1 second | 88,200 bytes |

## Response Format

The API returns JSON responses with the following structure:

### Standard Response

```json
{
    "text": "transcribed text here",
    "isEndOfTurn": false
}
```

### Response Fields

<ResponseField name="text" type="string">
  The transcribed text content
</ResponseField>

<ResponseField name="isEndOfTurn" type="boolean">
  Indicates if this marks the end of a speech turn
  - `true`: End of speech segment detected
  - `false`: More speech expected
</ResponseField>

### Response Flow Examples

#### 1. End of Turn Detection
```json
// Final result with end of turn
{ "text": "Hello, this is the end.", "isEndOfTurn": true }
```

### Voice Activity Events

When `emitVoiceActivity=true`, additional events may be sent:

```json
{
    "event": "voice_activity",
    "speaking": true,
    "timestamp": 1234567890
}
```

## Error Responses

Errors are sent as JSON before closing the connection:

### Error Format

```json
{
    "message": "error message",
    "error": "detailed error info"
}
```

### Common Error Types

#### Parameter Validation Errors

<Accordion title="Invalid Parameter Range">
```json
{
    "message": "Invalid input data",
    "error": "audioSampleRate must be at least 8000"
}
```
**Cause:** Parameter value outside allowed range  
**Solution:** Check parameter constraints and adjust values
</Accordion>

<Accordion title="Invalid Enum Value">
```json
{
    "message": "Invalid input data", 
    "error": "audioLanguage must be one of the following values: en, hi"
}
```
**Cause:** Invalid enum value provided  
**Solution:** Use only supported enum values
</Accordion>

<Accordion title="Missing Required Parameter">
```json
{
    "message": "Invalid input data",
    "error": "audioEncoding is required"
}
```
**Cause:** Required parameter not provided  
**Solution:** Include all required parameters
</Accordion>

#### Authentication Errors

<Accordion title="Unauthorized">
```json
{
    "message": "Unauthorized",
    "error": "Invalid or missing API key"
}
```
**Cause:** Invalid, missing, or malformed API key  
**Solution:** Verify API key format and validity
</Accordion>

<Accordion title="Insufficient Subscription">
```json
{
    "message": "No subscription",
    "error": "ASR requires Enterprise plan"
}
```
**Cause:** Account lacks required Enterprise subscription  
**Solution:** Upgrade to Enterprise Monthly or Enterprise Yearly
</Accordion>

<Accordion title="Insufficient Credits">
```json
{
    "message": "Insufficient credits",
    "error": "Account balance too low"
}
```
**Cause:** Account balance insufficient for operation  
**Solution:** Add credits to account or upgrade plan
</Accordion>

#### Connection Errors

<Accordion title="Socket Timeout">
```json
{
    "message": "socket timeout"
}
```
**Cause:** No audio received for 30 seconds  
**Solution:** Ensure continuous audio streaming or implement keep-alive
</Accordion>

<Accordion title="Rate Limit Exceeded">
```json
{
    "message": "Rate limit exceeded",
    "error": "Too many concurrent connections"
}
```
**Cause:** Exceeded concurrent connection limits  
**Solution:** Implement connection pooling and respect rate limits
</Accordion>

## Rate Limits & Quotas

| Limit Type | Enterprise Plan | Notes |
|------------|-----------------|-------|
| Connection Timeout | 30 seconds | If no audio received |
| Concurrent Connections | Plan-dependent | Contact support for limits |
| Audio Duration | Plan-dependent | Based on subscription tier |
| API Rate | Plan-dependent | Requests per minute limit |
