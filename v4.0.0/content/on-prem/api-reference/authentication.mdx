---
title: Authentication
description: Authenticate API requests with your license key
---

## Overview

All API requests to Smallest Self-Host require authentication using your license key. This ensures only authorized clients can access the speech-to-text service.

## Authentication Method

Smallest Self-Host uses **Bearer token authentication** with your license key.

### Authorization Header

Include your license key in the `Authorization` header:

```http
Authorization: Token YOUR_LICENSE_KEY
```

## Example Requests

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X POST http://localhost:7100/v1/listen \
      -H "Authorization: Token ${LICENSE_KEY}" \
      -H "Content-Type: application/json" \
      -d '{
        "url": "https://example.com/audio.wav"
      }'
    ```
  </Tab>

  <Tab title="Python">
    ```python
    import requests
    
    LICENSE_KEY = "your-license-key-here"
    API_URL = "http://localhost:7100"
    
    headers = {
        "Authorization": f"Token {LICENSE_KEY}",
        "Content-Type": "application/json"
    }
    
    response = requests.post(
        f"{API_URL}/v1/listen",
        headers=headers,
        json={"url": "https://example.com/audio.wav"}
    )
    
    print(response.json())
    ```
  </Tab>

  <Tab title="JavaScript">
    ```javascript
    const LICENSE_KEY = "your-license-key-here";
    const API_URL = "http://localhost:7100";
    
    const response = await fetch(`${API_URL}/v1/listen`, {
      method: "POST",
      headers: {
        "Authorization": `Token ${LICENSE_KEY}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        url: "https://example.com/audio.wav"
      })
    });
    
    const result = await response.json();
    console.log(result);
    ```
  </Tab>

  <Tab title="Go">
    ```go
    package main
    
    import (
        "bytes"
        "encoding/json"
        "fmt"
        "net/http"
    )
    
    func main() {
        licenseKey := "your-license-key-here"
        apiURL := "http://localhost:7100/v1/listen"
        
        payload := map[string]string{
            "url": "https://example.com/audio.wav",
        }
        jsonData, _ := json.Marshal(payload)
        
        req, _ := http.NewRequest("POST", apiURL, bytes.NewBuffer(jsonData))
        req.Header.Set("Authorization", "Token "+licenseKey)
        req.Header.Set("Content-Type", "application/json")
        
        client := &http.Client{}
        resp, err := client.Do(req)
        if err != nil {
            panic(err)
        }
        defer resp.Body.Close()
        
        var result map[string]interface{}
        json.NewDecoder(resp.Body).Decode(&result)
        fmt.Println(result)
    }
    ```
  </Tab>
</Tabs>

## Response Codes

<table style={{ borderCollapse: 'separate', borderSpacing: 0, width: '100%', borderRadius: '8px', overflow: 'hidden' }}>
  <thead>
    <tr style={{ backgroundColor: 'rgba(255, 255, 255, 0.08)' }}>
      <th style={{ padding: '12px 16px', textAlign: 'left', fontWeight: '800', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff', borderTopLeftRadius: '8px' }}>Code</th>
      <th style={{ padding: '12px 16px', textAlign: 'left', fontWeight: '800', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Status</th>
      <th style={{ padding: '12px 16px', textAlign: 'left', fontWeight: '800', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff', borderTopRightRadius: '8px' }}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>200</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>OK</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Request successful</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>400</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Bad Request</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Invalid request parameters</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>401</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Unauthorized</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Invalid or missing license key</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>403</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Forbidden</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>License expired or quota exceeded</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>429</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Too Many Requests</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Rate limit exceeded</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>500</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Internal Server Error</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Server error</td>
    </tr>
    <tr>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff', borderBottomLeftRadius: '8px' }}>503</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff' }}>Service Unavailable</td>
      <td style={{ padding: '12px 16px', border: '0.5px solid rgba(209, 213, 219, 0.2)', color: '#ffffff', borderBottomRightRadius: '8px' }}>Service temporarily unavailable</td>
    </tr>
  </tbody>
</table>

## Error Responses

### 401 Unauthorized

```json
{
  "error": "Invalid license key",
  "code": "INVALID_LICENSE"
}
```

**Solutions**:
- Verify license key is correct
- Check Authorization header format
- Ensure license hasn't expired

### 403 Forbidden

```json
{
  "error": "License expired",
  "code": "LICENSE_EXPIRED",
  "expires_at": "2024-12-31T23:59:59Z"
}
```

**Solutions**:
- Renew license with Smallest.ai
- Contact support@smallest.ai

### 429 Rate Limited

```json
{
  "error": "Rate limit exceeded",
  "code": "RATE_LIMIT_EXCEEDED",
  "retry_after": 60
}
```

**Solutions**:
- Wait and retry after specified seconds
- Implement exponential backoff
- Contact support for higher limits

## Security Best Practices

<AccordionGroup>
  <Accordion title="Secure Key Storage" icon="lock">
    Never hardcode license keys in source code.
    
    **Use environment variables**:
    ```bash
    export LICENSE_KEY="your-license-key-here"
    ```
    
    **Or secret managers**:
    - AWS Secrets Manager
    - HashiCorp Vault
    - Kubernetes Secrets
  </Accordion>

  <Accordion title="Use HTTPS in Production" icon="shield">
    Always use HTTPS for API requests in production:
    
    ```javascript
    const API_URL = "https://api.example.com";
    ```
    
    Configure TLS:
    ```yaml
    apiServer:
      tls:
        enabled: true
        certSecretName: "api-server-tls"
    ```
  </Accordion>

  <Accordion title="Rotate Keys Regularly" icon="rotate">
    Implement key rotation policy:
    
    - Rotate keys every 90 days
    - Use different keys for dev/staging/prod
    - Revoke compromised keys immediately
  </Accordion>

  <Accordion title="Monitor Usage" icon="chart-line">
    Track API usage to detect anomalies:
    
    - Unusual traffic patterns
    - Failed authentication attempts
    - Quota approaching limits
  </Accordion>

  <Accordion title="Implement Rate Limiting" icon="gauge">
    Add client-side rate limiting:
    
    ```python
    from ratelimit import limits, sleep_and_retry
    
    @sleep_and_retry
    @limits(calls=100, period=60)
    def call_api():
        response = requests.post(...)
        return response
    ```
  </Accordion>
</AccordionGroup>

## SDK Integration

### Python SDK

```bash
pip install smallest-client
```

```python
from smallest import Client

client = Client(
    api_url="http://localhost:7100",
    license_key="your-license-key-here"
)

result = client.transcribe_url("https://example.com/audio.wav")
print(result.text)
```

### JavaScript SDK

```bash
npm install @smallest/client
```

```javascript
import { SmallestClient } from '@smallest/client';

const client = new SmallestClient({
  apiUrl: 'http://localhost:7100',
  licenseKey: 'your-license-key-here'
});

const result = await client.transcribeUrl('https://example.com/audio.wav');
console.log(result.text);
```

<Note>
SDKs automatically handle authentication, retries, and error handling.
</Note>

## Testing Authentication

### Health Check (No Auth Required)

```bash
curl http://localhost:7100/health
```

Expected response:
```json
{
  "status": "healthy"
}
```

### Verify License Key

```bash
curl -X POST http://localhost:7100/v1/listen \
  -H "Authorization: Token ${LICENSE_KEY}" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/test.wav"}'
```

Successful authentication returns transcription results.

## What's Next?

<CardGroup cols={2}>
  <Card title="Transcription Endpoint" icon="microphone" href="/v4.0.0/content/on-prem/api-reference/endpoints/transcription">
    Learn about the transcription API
  </Card>

  <Card title="Health Check" icon="heart-pulse" href="/v4.0.0/content/on-prem/api-reference/endpoints/health-check">
    Monitor service health
  </Card>

  <Card title="Examples" icon="code" href="/v4.0.0/content/on-prem/api-reference/examples">
    See complete integration examples
  </Card>
</CardGroup>

